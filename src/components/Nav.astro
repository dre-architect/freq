---
const currentPath = Astro.url.pathname;
const links = [
  { href: '/platform', label: 'Platform' },
  { href: '/solutions/barge-drafting', label: 'Solutions' },
  { href: '/about', label: 'About' },
  { href: '/team', label: 'Team' },
  { href: '/contact', label: 'Contact' },
];
---
<nav class="fixed top-0 left-0 right-0 z-50 border-b border-[#1E293B]" style="background:rgba(8,12,24,0.85);backdrop-filter:blur(12px);">
  <div class="max-w-[1280px] mx-auto px-4 md:px-8 flex items-center justify-between h-16">
    <a href="/" class="font-heading text-white text-lg font-bold tracking-tight" style="font-family:var(--font-heading);">FREQ AI</a>
    <div class="hidden md:flex items-center gap-6">
      {links.map(link => (
        <a
          href={link.href}
          class:list={[
            'text-sm transition-colors',
            currentPath.startsWith(link.href)
              ? 'text-white border-b-2 border-[#7C3AED] pb-0.5'
              : 'text-[#94A3B8] hover:text-white'
          ]}
          style="font-family:var(--font-heading);"
        >{link.label}</a>
      ))}
      <a href="/contact" class="btn-primary text-sm !py-2 !px-4">Get Started</a>
    </div>
    <button id="mobile-menu-btn" class="md:hidden text-white p-2" aria-label="Open navigation menu">
      <span id="hamburger-icon" class="block">
        <span class="block w-5 h-0.5 bg-white mb-1 transition-all duration-200" id="bar1"></span>
        <span class="block w-5 h-0.5 bg-white mb-1 transition-all duration-200" id="bar2"></span>
        <span class="block w-5 h-0.5 bg-white transition-all duration-200" id="bar3"></span>
      </span>
    </button>
  </div>
  <div id="mobile-menu" class="hidden md:hidden border-t border-[#1E293B]" style="background:rgba(8,12,24,0.95);">
    <div class="px-4 py-4 flex flex-col gap-3">
      {links.map(link => (
        <a
          href={link.href}
          class:list={[
            'text-sm py-2',
            currentPath.startsWith(link.href) ? 'text-white' : 'text-[#94A3B8]'
          ]}
          style="font-family:var(--font-heading);"
        >{link.label}</a>
      ))}
      <a href="/contact" class="btn-primary text-sm text-center !py-2 !px-4 mt-2">Get Started</a>
    </div>
  </div>
</nav>
<script>
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  const bar1 = document.getElementById('bar1');
  const bar2 = document.getElementById('bar2');
  const bar3 = document.getElementById('bar3');
  let open = false;
  btn?.addEventListener('click', () => {
    open = !open;
    menu?.classList.toggle('hidden', !open);
    if (open) {
      bar1!.style.transform = 'rotate(45deg) translate(2px, 4px)';
      bar2!.style.opacity = '0';
      bar3!.style.transform = 'rotate(-45deg) translate(2px, -4px)';
      btn!.setAttribute('aria-label', 'Close navigation menu');
    } else {
      bar1!.style.transform = '';
      bar2!.style.opacity = '1';
      bar3!.style.transform = '';
      btn!.setAttribute('aria-label', 'Open navigation menu');
    }
  });
</script>
